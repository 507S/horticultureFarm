<%- include('../../includes/header')-%>
<div class="wrapper">
  <%- include('../../includes/topbar')-%>
  <div class="page-wrap">
    <%- include('../../includes/sidebar')-%>
    <div class="main-content">
      <div class="container-fluid">
        <div class="row clearfix">
          <div
            id="signupbox"
            style="margin-top: 50px"
            class="mainbox col-md-12 col-md-offset-3 col-sm-8 col-sm-offset-2"
          >
            <div class="panel panel-info">
              <div class="panel-heading">
                <div class="panel-title"><h2>এপিএ ফর্ম</h2></div>
                <p><% if(success !=''){ %> <%= success %> <% } %></p>
              </div>
              <div class="panel-body">
                <form
                  action="/center/apaForms"
                  id="FieldTrialForm"
                  class="form-horizontal"
                  method="post"
                  role="form"
                >
                  <div
                    id="signupalert"
                    style="display: none"
                    class="alert alert-danger"
                  >
                    <p>Error:</p>
                    <span></span>
                  </div>
                  <% if(messages.message){ %>
                  <div
                    class="alert alert-warning alert-dismissible fade show"
                    role="alert"
                  >
                    <strong><%= messages.message %></strong>
                    <button
                      type="button"
                      class="close"
                      data-dismiss="alert"
                      aria-label="Close"
                    >
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <% } %>

                  <div class="form-row mb-4">
                    <div class="col">
                      <label for="uddessho" class="col control-label"
                        >কৌশলগত উদ্দেশ্য</label
                      >
                      <select
                        name="uddessho"
                        id="uddessho"
                        class="form-control"
                      >
                        <option value="">কৌশলগত উদ্দেশ্য বাছুনঃ</option>
                        <% apaCodes.forEach(function(row){ %> <% if
                        (row.parent_id === null) {%>
                        <option value="<%" ="row.id" %>><%= row.name %></option>
                        <% } %> <% }) %>
                      </select>
                      <!--                                            <input type="text" class="form-control" name="uddessho" placeholder="কৌশলগত উদ্দেশ্য">-->
                    </div>
                    <div class="col">
                      <label for="maan" class="col control-label"
                        >কৌশলগত উদ্দেশ্যের মান</label
                      >
                      <!--                                            <input type="text" class="form-control" name="maan" placeholder="কৌশলগত উদ্দেশ্যের মান">-->
                      <select name="maan" id="maan" class="form-control">
                        <option value="" selected="true" disabled="true">
                          কৌশলগত উদ্দেশ্যের মান
                        </option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="work" class="col control-label"
                        >কার্যক্রম</label
                      >
                      <!--                                            <input type="text" class="form-control" name="work" placeholder="কার্যক্রম">-->
                      <select name="work" id="work" class="form-control">
                        <option value="">কার্যক্রম বাছুন</option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="shuchok" class="col control-label"
                        >কর্মসম্পাদন সূচক</label
                      >
                      <!--                                            <input type="text" class="form-control" name="shuchok" placeholder="কর্মসম্পাদন সূচক বাছুনঃ">-->
                      <select name="shuchok" id="shuchok" class="form-control">
                        <option value="">কর্মসম্পাদন সূচক বাছুনঃ</option>
                      </select>
                    </div>
                    <div class="col">
                      <label for="ekok" class="col control-label">একক</label>
                      <!--                                            <input type="text" class="form-control" name="ekok" placeholder="একক বাছুনঃ">-->
                      <select name="ekok" id="ekok" class="form-control">
                        <option value="">একক বাছুন</option>
                      </select>
                    </div>

                    <div class="col">
                      <label for="shuchokMaan" class="col control-label"
                        >কর্মসম্পাদন সূচক এর মান</label
                      >
                      <!--                                            <input type="text" class="form-control" name="shuchokMaan" placeholder="কর্মসম্পাদন সূচক এর মান বাছুনঃ">-->
                      <select
                        name="shuchokMaan"
                        id="shuchokMaan"
                        class="form-control"
                      >
                        <option value="">কর্মসম্পাদন সূচক এর মান বাছুনঃ</option>
                      </select>
                    </div>
                  </div>
                  <div class="col">
                    <label for="gonona" class="col control-label"
                      >গণনা পদ্ধতি</label
                    >
                    <select id="gonona" name="gonona">
                      <option value="গড়">গড়</option>
                      <option value="সমষ্টি">সমষ্টি</option>
                      <option value="বছর">বছর</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="best" class="col-md-3 control-label"
                      >লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (অসাধারণ ১০০%)</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="best"
                        placeholder="লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (অসাধারণ ১০০%)"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="otiUttam" class="col-md-3 control-label"
                      >লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (অতি উত্তম ৯০%)</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="otiUttam"
                        placeholder="লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (অতি উত্তম ৯০%)"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="uttam" class="col-md-3 control-label"
                      >লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (উত্তম ৮০%)</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="uttam"
                        placeholder="লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (উত্তম ৮০%)"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="cholti" class="col-md-3 control-label"
                      >লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (চলতি মান ৭০%)</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="cholti"
                        placeholder="লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (চলতি মান ৭০%)"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="below" class="col-md-3 control-label"
                      >লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (চলতি মানের নিম্নে
                      ৬০%)</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="below"
                        placeholder="লক্ষ্যমাত্রা/নির্ণায়ক চলতি অর্থবছর (চলতি মানের নিম্নে ৬০%)"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="firstThree" class="col-md-3 control-label"
                      >প্রথম ত্রৈমাসিক অর্জন</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="firstThree"
                        placeholder="প্রথম ত্রৈমাসিক অর্জন"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="secondThree" class="col-md-3 control-label"
                      >দ্বিতীয় ত্রৈমাসিক অর্জন</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="secondThree"
                        placeholder="দ্বিতীয় ত্রৈমাসিক অর্জন"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="thirdThree" class="col-md-3 control-label"
                      >তৃতীয় ত্রৈমাসিক অর্জন</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="thirdThree"
                        placeholder="তৃতীয় ত্রৈমাসিক অর্জন"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="fourthThree" class="col-md-3 control-label"
                      >চতুর্থ ত্রৈমাসিক অর্জন</label
                    >
                    <div class="col-md-9">
                      <input
                        type="number"
                        step="0.01"
                        class="form-control"
                        name="fourthThree"
                        placeholder="চতুর্থ ত্রৈমাসিক অর্জন"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-md-9">
                      <label for="year">বছর :</label>
                      <select id="year" name="year" required>
                        <option value="2021">২০২১-২২</option>
                        <option value="2022">২০২২-২৩</option>
                        <option value="2023">২০২৩-২৪</option>
                        <option value="2024">২০২৪-২৫</option>
                        <option value="2025">২০২৫-২৬</option>
                        <option value="2026">২০২৬-২৭</option>
                        <option value="2027">২০২৭-২৮</option>
                        <option value="2028">২০২৮-২৯</option>
                        <option value="2029">২০২৯-৩০</option>
                        <option value="2030">২০৩০-৩১</option>
                        <option value="2031">২০৩১-৩২</option>
                        <option value="2032">২০৩২-৩৩</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="col-md-9">
                      <input
                        type="hidden"
                        class="form-control"
                        name="user_id"
                        placeholder="id"
                        value="<%= user_id %>"
                      />
                    </div>
                  </div>

                  <div class="form-group">
                    <!-- Button -->
                    <div class="col-md-offset-3 col-md-9">
                      <input
                        type="submit"
                        name="submit"
                        value="submit"
                        class="btn btn-primary"
                      />
                    </div>
                  </div>

                  <div class="col-md-offset-3 col-md-9">
                    <button>
                      <a href="/center/apa" class="col-md-offset-3 col-md-9"
                        >Finish Submitting Report</a
                      >
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <%- include('../../includes/footer')-%>
  <script type="text/javascript">
    $("#uddessho").on("change", function () {
      var uddessho = $("#uddessho").val();
      // alert(category)
      $.ajax({
        type: "POST",
        url: "/center/fetchMaan",
        data: { uddessho: uddessho },
        datatype: "json",
        beforeSend: function () {
          // setting a timeout
          $("#maan").empty();
        },
        success: function (data) {
          $("#maan").empty();
          if (data) {
            $("#maan").append(
              '<option value="0">কৌশলগত উদ্দেশ্যের মান বাছুনঃ</option>'
            );
            $.each(data, function (key, value) {
              $("#maan").append(
                '<option value="' + value.id + '">' + value.name + "</option>"
              );
            });
          } else {
            $("#maan").empty();
          }
        },
        complete: function () {
          $("#loading").hide();
          $("#output").show();
        },
      });
    });

    $("#maan").on("change click load", function () {
      var maan = $("#maan").val();
      $.ajax({
        type: "POST",
        url: "/center/fetchWork",
        data: { maan: maan },
        datatype: "json",
        beforeSend: function () {
          // setting a timeout
          $("#work").empty();
          $("#breed").empty();
        },
        success: function (data) {
          $("#work").empty();
          if (data) {
            $("#work").append('<option value="0"> কার্যক্রম বাছুন</option>');
            $.each(data, function (key, value) {
              $("#work").append(
                '<option value="' + value.id + '">' + value.name + "</option>"
              );
            });
          } else {
            $("#work").empty();
          }
        },
        complete: function () {
          $("#loading").hide();
          $("#output").show();
        },
      });
    });

    $("#work").on("change click", function () {
      var work = $("#work").val();
      $.ajax({
        type: "POST",
        url: "/center/fetchShuchok",
        data: { work: work },
        datatype: "json",
        beforeSend: function () {
          // setting a timeout
          $("#loading").show();
          $("#output").hide();
        },
        success: function (data) {
          $("#shuchok").empty();
          if (data) {
            $("#shuchok").append(
              '<option value="0"> কর্মসম্পাদন সূচক বাছুনঃ </option>'
            );
            $.each(data, function (key, value) {
              $("#shuchok").append(
                '<option value="' + value.id + '">' + value.name + "</option>"
              );
            });
          } else {
            $("#shuchok").empty();
          }
        },
        complete: function () {
          $("#loading").hide();
          $("#output").show();
        },
      });
    });

    $("#shuchok").on("change click", function () {
      var shuchok = $("#shuchok").val();
      $.ajax({
        type: "POST",
        url: "/center/fetchEkok",
        data: { shuchok: shuchok },
        datatype: "json",
        beforeSend: function () {
          // setting a timeout
          $("#loading").show();
          $("#output").hide();
        },
        success: function (data) {
          $("#ekok").empty();
          $("#shuchokMaan").empty();

          if (data) {
            $("#ekok").append('<option value="0"> একক বাছুনঃ </option>');
            $.each(data, function (key, value) {
              if (value.type === "ekok") {
                $("#ekok").append(
                  '<option value="' + value.id + '">' + value.name + "</option>"
                );
              }
            });
            $("#shuchokMaan").append(
              '<option value="0"> কর্মসম্পাদন সূচক এর মান বাছুনঃ </option>'
            );
            $.each(data, function (key, value) {
              if (value.type === "suchokMaan") {
                $("#shuchokMaan").append(
                  '<option value="' + value.id + '">' + value.name + "</option>"
                );
              }
            });
          } else {
            $("#ekok").empty();
          }
        },
        complete: function () {
          $("#loading").hide();
          $("#output").show();
        },
      });
    });

    $(document).ready(function () {
      // var q = parseFloat(<?php echo $row['price']; ?>);
      var q = json_encode(apaCodes);
      alert(q);
      $("p").click(function () {
        $(this).hide();
      });

      $("#uddessho").on("change", function () {
        var uddessho = $("#uddessho").val();
        alert(uddessho);
        $.ajax({
          type: "GET",
          url: "/center/fetchMaan",
          data: { uddessho: uddessho },
          datatype: "json",
          beforeSend: function () {
            // setting a timeout
            $("#loading").show();
            $("#output").hide();
          },
          success: function (data) {
            $("#maan").empty();
            if (data) {
              $.each(data, function (key, value) {
                $("#maan").append(
                  '<option value="' + value.id + '">' + value.name + "</option>"
                );
              });
            } else {
              $("#maan").empty();
            }
          },
          complete: function () {
            $("#loading").hide();
            $("#output").show();
          },
        });
      });
    });
  </script>
</div>
