<%if (records.length >0){ %>
    <table class="table table-bordered table-striped" id="tblCustomers" cellspacing="0" cellpadding="0">
    <thead>
    <tr>
        <th>ক্যাটাগরি নাম</th>
        <th>সাব-ক্যাটাগরি নাম</th>
        <th>বিবরণ</th>
        <th>জাত</th>
        <th>উৎপাদন (লক্ষ্যমাত্রা)</th>
        <th>উৎপাদন (চলতি মাস)</th>
        <th>উৎপাদন (পূর্বমাস পর্যন্ত)</th>
        <th>মোট উৎপাদন (চলতি+পূর্ব মাস)</th>
        <th>ডিএই চালানে প্রাপ্তি</th>
        <th>পূর্ব বছরের জের</th>
        <th>সর্বমোট (মোট+ডিএই চালানে প্রাপ্তি+পূর্ব বছরের জের)</th>
        <th>বিতরণ (চলতি মাস)</th>
        <th>বিতরণ (পূর্বমাস পর্যন্ত)</th>
        <th>বিতরণ মোট (চলতি+পূর্ব মাস)</th>
        <th>ডিএই চালানে প্রদান</th>
        <th>মৃত/বিনষ্ট রাইটআপ</th>
        <th>সর্বমোট (মোট+ডিএই চালানে প্রদান+মৃত/বিনষ্ট রাইটআপ)</th>
        <th>নীট মজুদ</th>
        <th>মন্তব্য</th>
        <th>পরিবর্তন/মুছুন</th>
    </tr>
    </thead>
    <tbody>
        <% records.forEach(function(row){ %>

            <%
                var currentProductionSum = 0;
                var previousMonthProduction = 0;
                var totalProductionSum = 0;
                const currentProd = JSON.parse(row.productionCurrent)
                currentProd.forEach(function(prodCurrent){
                    if ( prodCurrent.time === moment().format("MMM-YYYY").toLowerCase() ) {
                        currentProductionSum += parseInt(prodCurrent.amount)
                        totalProductionSum += parseInt(prodCurrent.amount)
                    }
                    else if ( prodCurrent.time !== moment().format("MMM-YYYY").toLowerCase() ){
                        previousMonthProduction += parseInt(prodCurrent.amount)
                        totalProductionSum += parseInt(prodCurrent.amount)
                    }
                    else{

                    }
                })
            %>

            <tr>
                <td><%= row.category %></td>
                <td><%= row.subCategory %></td>
                <td><%= row.biboron %></td>
                <td><%= row.breed %></td>
                <td><%= new Number(row.productionTarget).toLocaleString("bn-BD") %></td>
                <td>
                    <%= new Number(currentProductionSum).toLocaleString("bn-BD") %>
                </td>
                <td> <%= new Number(previousMonthProduction).toLocaleString("bn-BD") %> </td>
                <td> <%= new Number(totalProductionSum).toLocaleString("bn-BD") %> </td>
                <td><%= row.daePrapti %></td>
                <td><%= row.lastYear %></td>
                <td><%= row.grandTotalProduction %></td>
                <td><%= row.bitoronCurrentMonth %></td>
                <td><%= row.bitoronLastMonth %></td>
                <td><%= row.bitoronTotal %></td>
                <td><%= row.daeProdan %></td>
                <td><%= row.deadWriteup %></td>
                <td><%= row.grandTotalBitoron %></td>
                <td><%= row.mojud %></td>
                <td><%= row.comment %></td>
                <td><a class="btn btn-primary btn-xs" href="/center/monthlyProgressEdit/<%= row.id %>"><i class="fa fa-edit"></i></a>
                    <a class="btn btn-danger btn-xs" href="/delete/<%= row.id %>"><i class="fa fa-trash"></i></a>
                </td>
            </tr>
        <% }) %>
    </tbody>
</table>
<% }else{ %>
    <table class="table table-bordered table-striped" id="tblCustomers" cellspacing="0" cellpadding="0">
        <thead>
        <tr>
            <th>ক্যাটাগরি নাম</th>
            <th>সাব-ক্যাটাগরি নাম</th>
            <th>বিবরণ</th>
            <th>জাত</th>
            <th>উৎপাদন (লক্ষ্যমাত্রা)</th>
            <th>উৎপাদন (চলতি মাস)</th>
            <th>উৎপাদন (পূর্বমাস পর্যন্ত)</th>
            <th>মোট উৎপাদন (চলতি+পূর্ব মাস)</th>
            <th>ডিএই চালানে প্রাপ্তি</th>
            <th>পূর্ব বছরের জের</th>
            <th>সর্বমোট (মোট+ডিএই চালানে প্রাপ্তি+পূর্ব বছরের জের)</th>
            <th>বিতরণ (চলতি মাস)</th>
            <th>বিতরণ (পূর্বমাস পর্যন্ত)</th>
            <th>বিতরণ মোট (চলতি+পূর্ব মাস)</th>
            <th>ডিএই চালানে প্রদান</th>
            <th>মৃত/বিনষ্ট রাইটআপ</th>
            <th>সর্বমোট (মোট+ডিএই চালানে প্রদান+মৃত/বিনষ্ট রাইটআপ)</th>
            <th>নীট মজুদ</th>
            <th>মন্তব্য</th>
            <th>পরিবর্তন/মুছুন</th>
        </tr>
        </thead>
        <tbody>
        <% records.forEach(function(row){ %>
            <tr>
                <td colspan="10">No data Found</td>
            </tr>
        <% }) %>
        </tbody>
    </table>
<% } %>